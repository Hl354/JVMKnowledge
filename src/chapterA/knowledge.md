## Java虚拟机内存结构分布
Java内存结构主要分为两部分，一部分是线程共享数据区，一部分是线程私有的数据区。
共享数据区主要包括方法区和Java堆。私有数据区主要包括虚拟机栈、本地方法栈以及程序计数器。

程序计数器：一块较小的内存区域，可以看作当前线程所执行的字节码的行号指示器。

虚拟机栈：描述的是Java方法的内存模型，每个方法在执行时都会创建一个栈帧用于存储局部变量表、操作数栈、动态链接、方法出口等信息。

本地方法栈：可以认为是执行本地方法的虚拟机栈，有些虚拟机会将虚拟机栈和本地方法栈合二为一，如Sun HotSpot虚拟机。

Java堆：存放对象实例，几乎所有的对象实例都在这里分配内存。

方法区：用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。方法区包括运行时常量池和直接内存两部分。

## 内存分配方式
指针碰撞：将内存分为已使用过和空闲两块区域，用一个指针作为分割，当有对象需要分配内存时，将指针向空闲区域移动对象所需要的内存相等的距离。

空闲列表：虚拟机维护一个列表，记录内存是否可用，需要为对象分配内存时，从列表中找一块足够大的空间划分给内存对象。

## 对象内存布局
一共由三部分组成，包括对象头（存储对象自身的运行时数据和对象指向它的类元数据的指针）、实例数据（存储对象真正的有效信息）以及对齐填充。
